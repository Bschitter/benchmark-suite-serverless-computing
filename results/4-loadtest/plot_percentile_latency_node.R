x <- read.csv("percentile_latency_node.csv",header=T,sep=",")
x <- t(x)
aws_node_50 <- as.numeric(x[2,1:40])
aws_node_95 <- as.numeric(x[3,1:40])
aws_node_99 <- as.numeric(x[4,1:40])
azure_node_50 <- as.numeric(x[5,1:40])
azure_node_95 <- as.numeric(x[6,1:40])
azure_node_99 <- as.numeric(x[7,1:40])
azure_win_node_50 <- as.numeric(x[8,1:40])
azure_win_node_95 <- as.numeric(x[9,1:40])
azure_win_node_99 <- as.numeric(x[10,1:40])
google_node_50 <- as.numeric(x[11,1:40])
google_node_95 <- as.numeric(x[12,1:40])
google_node_99 <- as.numeric(x[13,1:40])
ibm_node_50 <- as.numeric(x[14,1:40])
ibm_node_95 <- as.numeric(x[15,1:40])
ibm_node_99 <- as.numeric(x[16,1:40])
png(file = "plot_percentile_latency_node.png", width=1600, height=800, units="px", pointsize=24)
plot(aws_node_50, type="l", lwd=2, lty=1, col = "#E69F00", xlab = expression(bold("requests per second")), ylab = expression(bold("time (ms)")), main = "Node.js percentiles 50% - 95% - 99%",ylim=c(0,5000), xaxt="n", las=1)
axis(1, at=1:40, labels=c("10", "25", "50", "100", "200", "400", "800", "1000", "10", "25", "50", "100", "200", "400", "800", "1000", "10", "25", "50", "100", "200", "400", "800", "1000", "10", "25", "50", "100", "200", "400", "800", "1000", "10", "25", "50", "100", "200", "400", "800", "1000"), las=2)
lines(aws_node_95,lty=2, type = "l", lwd=2, col = "#E69F00")
lines(aws_node_99,lty=3, type = "l", lwd=2, col = "#E69F00")
lines(azure_node_50,lty=1, type = "l", lwd=2, col = "#56B4E9")
lines(azure_node_95,lty=2, type = "l", lwd=2, col = "#56B4E9")
lines(azure_node_99,lty=3, type = "l", lwd=2, col = "#56B4E9")
lines(azure_win_node_50,lty=1, type = "l", lwd=2, col = "purple")
lines(azure_win_node_95,lty=2, type = "l", lwd=2, col = "purple")
lines(azure_win_node_99,lty=3, type = "l", lwd=2, col = "purple")
lines(google_node_50,lty=1, type = "l", lwd=2, col = "#00BA38")
lines(google_node_95,lty=2, type = "l", lwd=2, col = "#00BA38")
lines(google_node_99,lty=3, type = "l", lwd=2, col = "#00BA38")
lines(ibm_node_50,lty=1, type = "l", lwd=2, col = "#E33939")
lines(ibm_node_95,lty=2, type = "l", lwd=2, col = "#E33939")
lines(ibm_node_99,lty=3, type = "l", lwd=2, col = "#E33939")
abline(v=c(8.5,16.5,24.5,32.5), col="gray")
grid (NULL,NULL,nx=0,col = "lightgray")
legend(1, 4500, legend=c("AWS", "Azure", "Azure (Win)", "Google", "IBM", "50%", "95%", "99%"),
col=c("#E69F00", "#56B4E9", "purple", "#00BA38", "#E33939", "black", "black", "black"), lwd=2,
lty=c(1,1,1,1,1,1,2,3), cex=0.8)

